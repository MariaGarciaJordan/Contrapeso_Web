---
import ProductCard from "./ProductCard.astro";

interface Product {
  name: string;
  description: string;
  price: number;
  image: string;
}

interface Props {
  products: Product[];
}

const { products } = Astro.props as Props;
---

<!-- CONTENEDOR GENERAL -->
<div class="relative w-full max-w-7xl mx-auto">

  <!-- FADE IZQUIERDA -->
  <div class="pointer-events-none absolute left-0 top-0 h-full w-24 
              bg-gradient-to-r from-black/40 to-transparent z-20"></div>

  <!-- FADE DERECHA -->
  <div class="pointer-events-none absolute right-0 top-0 h-full w-24 
              bg-gradient-to-l from-black/40 to-transparent z-20"></div>

  <!-- BOTÓN IZQUIERDA -->
  <button
    id="btn-prev"
    class="absolute left-4 top-1/2 -translate-y-1/2 z-30
           bg-white/60 backdrop-blur-md border border-white/40
           p-3 rounded-full shadow-md hover:bg-white/80 transition"
  >
    <span class="material-icons text-gray-800">chevron_left</span>
  </button>

  <!-- BOTÓN DERECHA -->
  <button
    id="btn-next"
    class="absolute right-4 top-1/2 -translate-y-1/2 z-30
           bg-white/60 backdrop-blur-md border border-white/40
           p-3 rounded-full shadow-md hover:bg-white/80 transition"
  >
    <span class="material-icons text-gray-800">chevron_right</span>
  </button>

  <!-- CARRUSEL -->
  <div
    id="carousel"
    class="flex gap-10 overflow-x-auto snap-x snap-mandatory px-6 pb-6 
           scroll-smooth no-scrollbar"
  >
    {products.map((p) => (
      <div class="snap-center min-w-[320px] sm:min-w-[360px]">
        <ProductCard
          name={p.name}
          description={p.description}
          price={p.price}
          image={p.image}
        />
      </div>
    ))}
  </div>
</div>

<style>
  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
</style>

<script is:inline>
  const carousel = document.getElementById("carousel");
  const prev = document.getElementById("btn-prev");
  const next = document.getElementById("btn-next");

  prev?.addEventListener("click", () => {
    carousel.scrollBy({ left: -400, behavior: "smooth" });
  });

  next?.addEventListener("click", () => {
    carousel.scrollBy({ left: 400, behavior: "smooth" });
  });
</script>
